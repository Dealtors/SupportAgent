<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8">
<title>Регламент диагностики и восстановления: 1С, SAP FI/MM, ЭДО, CI/CD, Kubernetes/Docker, Почтовые сервисы</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  body { font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Noto Sans",Arial,"Helvetica Neue",sans-serif; line-height: 1.6; margin: 40px; color: #222; }
  h1 { font-size: 28px; margin-bottom: 0; }
  em.subtitle { color: #555; display: block; margin-bottom: 24px; }
  h2 { margin-top: 28px; border-bottom: 1px solid #eee; padding-bottom: 6px; }
  strong { color: #111; }
  .glossary dt { font-weight: 600; }
  .glossary dd { margin: 0 0 12px 0; }
  @media print { body { margin: 12mm; } h1 { font-size: 22px; } }
</style>
</head>
<body>
  <h1>Регламент диагностики и восстановления: 1С, SAP FI/MM, ЭДО, CI/CD, Kubernetes/Docker, Почтовые сервисы</h1>
  <em class="subtitle">Версия 1.0</em>
<h2>1. 1С / Бухгалтерский учет</h2>
<p><strong>Назначение.</strong> Документ устанавливает порядок выявления причин сбоев и восстановления работоспособности прикладных решений на платформе 1С:Предприятие 8.x. Цель состоит в минимизации простоя, сохранении целостности данных и обеспечении корректного обмена с внешними системами.</p>
<p><strong>Область применения.</strong> Материал применяется к серверным кластерам 1С, тонким и толстым клиентам, серверам баз данных MS SQL и PostgreSQL, а также к интеграциям с системами электронного документооборота и смежными учетными системами.</p>
<p><strong>Признаки и возможные причины.</strong> Не запускается клиент 1С; ошибки подключения к серверу или СУБД; зависания интерфейса и заметное замедление операций; ошибки регистров и расхождения в отчетах; прекращение формирования или отправки регламентированной отчетности; прерывание обменов с внешними сервисами. Типичные причины: недоступность сервера СУБД; дефицит CPU/RAM/диска; ошибки конфигурации кластера; конфликт версий платформы и конфигураций; повреждение ИБ из‑за некорректного завершения сеансов.</p>
<p><strong>Порядок проверки.</strong> 1) Подтвердить сетевую доступность сервера СУБД: ping <db_host>, telnet <db_host> 1433|5432. 2) Проверить состояние служб 1С: systemctl status srv1cv83 (Linux) или оснастка «Службы» (Windows). 3) Оценить свободное место: df -h (Linux) или Get-Volume (Windows). 4) Изучить журнал регистрации 1С и журналы СУБД (errorlog, postgresql.log). 5) Контролировать подключения и активность сеансов в консоли администрирования кластера 1С.</p>
<p><strong>Порядок восстановления.</strong> 1) Корректно завершить активные пользовательские сеансы. 2) Перезапустить службы сервера 1С и экземпляра СУБД. 3) Выполнить тестирование и исправление ИБ штатными средствами; при признаках повреждения восстановить из последней успешной резервной копии. 4) Перепровести документы проблемного периода, обновить регистры и проверить корректность обменов и регламентных заданий.</p>
<p><strong>Профилактика.</strong> Регулярные резервные копии с проверкой восстановления; централизованное обновление платформы и конфигураций; мониторинг CPU, RAM, диска и блокировок в СУБД; плановая проверка журналов на ошибки логической корректности и деградации производительности.</p>
<p><strong>Контроль.</strong> Фиксировать результаты в журнале инцидентов: временные метки, характер ошибки, предпринятые действия, подтверждение восстановления работоспособности.</p>
<h2>2. SAP FI/MM</h2>
<p><strong>Назначение.</strong> Определяет порядок диагностики и восстановления процессов финансового учета и материального менеджмента в SAP при операционных сбоях.</p>
<p><strong>Область применения.</strong> Транзакции FI и MM, отчёты налогового учета (включая RFUMSV00), интерфейсы интеграции с внешними системами.</p>
<p><strong>Признаки и возможные причины.</strong> Ошибки проводок в FI, MIRO или FB60; зависания при запуске отчетов; некорректные налоговые коды и ставки; отклонения в RFUMSV00; нестабильность интеграций по IDoc или RFC; неверные фильтры в ALV. Причины: некорректные мастер‑данные поставщиков и материалов; неверные налоговые ключи; закрытие периода; конфликтующие пользовательские фильтры и параметры отчетов; сетевые или авторизационные ограничения.</p>
<p><strong>Порядок проверки.</strong> 1) Проверить доступность приложений и портов: ping <sap_app>, telnet <sap_app> 32xx. 2) Проанализировать ST22, SM21, SM37, SM13 и блокировки в SM12. 3) Пересмотреть параметры RFUMSV00 с учетом периода и отборов; очистить пользовательские фильтры в ALV; актуализировать мастер‑данные и налоговые коды; при необходимости открыть соответствующий период.</p>
<p><strong>Порядок восстановления.</strong> Скорректировать параметры транзакций; выполнить повторное проведение документов; перезапустить фоновые задания; синхронизировать интеграции; привести варианты ALV к стандартизированным шаблонам; обновить кэш; сформировать повторный отчет и сверить результаты.</p>
<p><strong>Профилактика.</strong> Утвердить регламент изменения мастер‑данных; контролировать параметры налогообложения и шаблоны отчетов; регулярно очищать блокировки и кэши; сопровождать интеграции мониторингом; валидировать периоды закрытия.</p>
<p><strong>Контроль.</strong> В отчет включать использованные транзакции, номера документов, выполненные корректировки, перезапуски и результаты сверки.</p>
<h2>3. Электронный документооборот (Диадок, Контур, СБИС)</h2>
<p><strong>Назначение.</strong> Порядок настройки, проверки и восстановления обмена электронными документами через операторов ЭДО, включая работу с электронными подписями.</p>
<p><strong>Область применения.</strong> Встроенные модули ЭДО в 1С и отдельные клиентские приложения операторов.</p>
<p><strong>Признаки и возможные причины.</strong> Документы не отправляются/не принимаются; статусы долго «в ожидании»; подпись отклоняется из‑за недействительного сертификата; форматы КНД не распознаются; транспортные ошибки. Причины: истекший сертификат; разрыв цепочки доверия; неверная привязка к учетной записи/токену; отсутствие закрытого ключа; устаревшие корневые сертификаты и плагины; сетевые ограничения.</p>
<p><strong>Порядок проверки.</strong> 1) Проверить срок действия и цепочку доверия: certmgr.msc (Windows) или openssl x509 -in cert.cer -text -noout. 2) Валидировать привязку сертификата и наличие закрытого ключа на токене. 3) Подписать тестовый документ и сверить форматы КНД. 4) Проанализировать статусы у контрагентов. 5) Проверить сетевую доступность сервисов ЭДО и актуальность плагинов.</p>
<p><strong>Порядок восстановления.</strong> Выпустить и установить новый сертификат с актуальными корневыми; перепривязать сертификат к учетной записи; повторно отправить документы и при необходимости инициировать повторную доставку; обновить клиент/плагин ЭДО; перезапустить рабочую станцию.</p>
<p><strong>Профилактика.</strong> Календарь ротации сертификатов; резервные носители подписи; ежедневный контроль протоколов и статусов; актуальность корневых сертификатов и версий плагинов.</p>
<p><strong>Контроль.</strong> Фиксировать ИНН контрагента, тип и номер документа, текущий статус, хэш протокола и исполнителя.</p>
<h2>4. CI/CD и DevOps</h2>
<p><strong>Назначение.</strong> Стандартизированный порядок диагностики и восстановления конвейеров непрерывной интеграции и доставки ПО.</p>
<p><strong>Область применения.</strong> Системы CI/CD (например, GitLab CI и Jenkins), взаимодействие с системами контроля версий, реестрами образов и инфраструктурным кодом.</p>
<p><strong>Признаки и возможные причины.</strong> Пайплайны завершаются по тайм‑ауту или из‑за ошибок зависимостей; агенты не подхватывают задания; не проходит аутентификация к репозиторию или реестру; повреждены кэш/артефакты; дрейф зависимостей. Причины: сетевые и прокси‑ограничения; неверные SSH‑ключи или токены; недостаточные временные/ресурсные лимиты.</p>
<p><strong>Порядок проверки.</strong> 1) Проверить доступ к репозиторию: ssh -T git@<host>, git ls-remote. 2) Войти в реестр образов: docker login <registry>; проверить доступ: curl -I <url>. 3) Проанализировать логи агента и состояние очереди; проверить переменные окружения. 4) Перезапустить пайплайн без кэша; уточнить тайм‑ауты по стадиям.</p>
<p><strong>Порядок восстановления.</strong> Пересоздать кэши и артефакты; зафиксировать версии зависимостей в lock‑файлах; настроить повторные попытки и увеличить тайм‑ауты на нестабильных шагах; актуализировать ключи и токены; обновить список доверенных хостов; задокументировать изменения.</p>
<p><strong>Профилактика.</strong> Закрепление версий зависимостей; репликация реестра образов; SLO для пайплайнов; обязательные smoke‑тесты и security‑чеки; алертинг по падениям и долгим задачам.</p>
<p><strong>Контроль.</strong> Фиксировать идентификатор коммита, номер пайплайна, список стадий, длительность, ответственных и ссылки на артефакты.</p>
<h2>5. Kubernetes / Docker</h2>
<p><strong>Назначение.</strong> Диагностика и восстановление контейнерных приложений в средах Kubernetes и Docker.</p>
<p><strong>Область применения.</strong> Рабочие кластеры, пространства имен, ingress‑контроллеры и реестры образов.</p>
<p><strong>Признаки и возможные причины.</strong> Недоступность приложения; CrashLoopBackOff или ImagePullBackOff; трафик не проходит через Ingress/Service; повышенная задержка и рост ошибок. Причины: некорректные секреты для реестра; ошибки readiness/liveness; неверные ограничения ресурсов; сетевые политики и маршрутизация.</p>
<p><strong>Порядок проверки.</strong> 1) kubectl get pods -n <ns> -o wide; kubectl describe pod <name> -n <ns>. 2) kubectl get events -n <ns>; kubectl logs <pod> -n <ns>. 3) Проверить secrets и configmaps: kubectl get secrets, kubectl get configmaps. 4) Проверить настройки ingress и service.</p>
<p><strong>Порядок восстановления.</strong> Актуализировать секреты и imagePullSecrets; подтвердить доступ к реестру; скорректировать readiness/liveness; пересмотреть requests/limits; выполнить перекат релиза Helm с параметром --atomic; при необходимости откатиться до проверенной версии.</p>
<p><strong>Профилактика.</strong> Регулярное сканирование образов; контроль дрейфа конфигураций; квоты ресурсов и горизонтальное авто‑масштабирование; мониторинг задержек и частоты ошибок; периодическая валидация ingress и сетевых политик.</p>
<p><strong>Контроль.</strong> Фиксировать версию чарта и образа, перечень изменений, причину сбоя и подтверждение стабильной работы после исправления.</p>
<h2>6. Outlook / Exchange / Почтовые сервисы</h2>
<p><strong>Назначение.</strong> Порядок устранения неполадок почтовых клиентов и серверной части инфраструктуры Exchange и SMTP.</p>
<p><strong>Область применения.</strong> Рабочие станции с Outlook, а также почтовые серверы, шлюзы и политики безопасности.</p>
<p><strong>Признаки и возможные причины.</strong> Почта не отправляется/не доставляется; клиент не подключается и зависает при синхронизации; письма попадают в карантин или спам. Причины: неверные учетные данные; поврежденный профиль клиента; некорректные политики шлюза безопасности; нарушения DMARC/SPF/DKIM; сетевые и квотные ограничения.</p>
<p><strong>Порядок проверки.</strong> 1) Проверить доступность серверов: ping <mail_host>, telnet <mail_host> 25|443. 2) Пересоздать профиль клиента; проверить автоконфигурацию (Autodiscover, тест подключения). 3) Проанализировать карантин, транспортные правила и журналы SMTP.</p>
<p><strong>Порядок восстановления.</strong> Очистить или пересоздать профиль; перезапустить клиентские службы; исправить записи SPF, DKIM и DMARC; актуализировать белые списки; увеличить квоту ящика или выполнить очистку; проверить отправку и доставку тестовых сообщений.</p>
<p><strong>Профилактика.</strong> Мониторинг репутации домена и отчетов DMARC; регулярные обновления клиента и плагинов; требования к паролям и MFA; контроль корректности транспортных правил и антиспам‑политик.</p>
<p><strong>Контроль.</strong> Указывать адреса отправителя и получателя, заголовки (Message-ID), время обработки, задействованное правило и итог доставки.</p>
<h2>Глоссарий терминов и определений</h2>
<dl class='glossary'>
<dt>Сертификат электронной подписи</dt><dd>Набор ключевых данных пользователя (открытый и закрытый ключ), используемый для подписания электронных документов и проверки их подлинности.</dd>
<dt>DMARC, SPF и DKIM</dt><dd>Механизмы проверки подлинности и целостности почтовых сообщений и доменов, снижающие уровень спуфинга и фишинга.</dd>
<dt>Runner или Agent</dt><dd>Исполняющий компонент системы CI/CD, запускающий задания конвейера в соответствии с конфигурацией.</dd>
<dt>CrashLoopBackOff</dt><dd>Состояние контейнера в Kubernetes, при котором процесс многократно завершается с ошибкой вскоре после запуска.</dd>
<dt>RFUMSV00</dt><dd>Стандартный отчёт SAP для анализа и сверки данных по НДС за период.</dd>
<dt>Журнал регистрации 1С</dt><dd>Системный журнал платформы 1С, фиксирующий операции и ошибки; используется для диагностики производительности и целостности.</dd>
</dl>
</body>
</html>