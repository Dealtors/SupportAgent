:root{
  --bg:#010B17;
  --surface:#0E1630;
  --border:#1B2A4A;
  --text:#E6EAF2;
  --dim:#94A3B8;
  --lime:#BEF264;
  --lime-soft: rgba(190,242,100,0.15);
  --rose-soft: rgba(244,63,94,0.12);
  --yellow-soft: rgba(250,204,21,0.12);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font:14px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji";
}

/* Utilities */
.container{max-width:960px;margin:0 auto;padding:0 16px}
.border{border:1px solid var(--border)}
.surface{background:var(--surface)}
.round-xl{border-radius:14px}
.round-2xl{border-radius:18px}
.text-dim{color:#94A3B8}
.text-11{font-size:11px}
.mono{font-variant-numeric:tabular-nums}

/* Header */
.header{
  position:sticky; top:0; z-index:20;
  border-bottom:1px solid var(--border);
  background:rgba(1,11,23,0.96);
  -webkit-backdrop-filter:saturate(120%) blur(2px);
  backdrop-filter:saturate(120%) blur(2px);
}
.header-inner{display:flex;gap:12px;align-items:center;padding:12px 0}
.brand-badge{
  width:36px;height:36px;display:grid;place-items:center;
  border:1px solid var(--border); background:var(--surface); border-radius:10px;
}
.brand-title{font-size:13px;color:#CBD5E1}
.brand-sub{font-size:12px;color:#64748B}

/* Chat area */
.main{padding-top:24px;padding-bottom:140px}
.thread{display:flex;flex-direction:column;gap:20px}

/* Message layout */
.msg{display:flex;gap:12px; position:relative}
.msg.bot{flex-direction:row}
.msg.user{flex-direction:row-reverse}

.msg-avatar{
  width:36px;height:36px;display:grid;place-items:center;
  border:1px solid var(--border); background:var(--surface); border-radius:10px; flex-shrink:0;
}
.msg-bubble{max-width:72%}
@media (min-width:640px){ .msg-bubble{max-width:68%} }
@media (min-width:768px){ .msg-bubble{max-width:60%} }
@media (min-width:1024px){ .msg-bubble{max-width:55%} }

.msg-card{
  position:relative;
  padding:12px 16px;
  border:1px solid var(--border);
  background:var(--surface);
  border-radius:14px;
  font-size:14px;
  line-height:1.6;
  color:var(--text);
}

/* Accent rail */
.msg-card::before{
  content:"";
  position:absolute; left:0; top:0; bottom:0; width:3px;
  border-top-left-radius:14px; border-bottom-left-radius:14px;
  background:#64748B; /* user default */
}
.msg.bot .msg-card::before{background:var(--lime)}

/* Probability pill (for bot only) */
.prob{
  position:absolute; right:12px; top:-12px;
  padding:2px 8px; border-radius:8px; font-size:11px;
  border:1px solid rgba(190,242,100,0.35);
  color:#D9F99D; background:var(--lime-soft);
}
.prob.mid{background:var(--yellow-soft); color:#FDE68A; border-color:rgba(250,204,21,0.35)}
.prob.low{background:var(--rose-soft); color:#FECDD3; border-color:rgba(244,63,94,0.3)}

/* Hover actions */
.msg-actions{
  position:absolute; right:12px; bottom:-14px;
  display:flex; gap:6px; opacity:0; transition:opacity .18s ease;
}
.msg:hover .msg-actions{opacity:1}

.icon-btn, .thumb-btn{
  width:32px; height:32px; display:inline-grid; place-items:center;
  border:1px solid var(--border); background:var(--surface);
  color:#CBD5E1; border-radius:10px; cursor:pointer; transition:color .15s ease, border-color .15s ease, background .15s ease, transform .08s ease;
}
.icon-btn:hover{color:var(--lime)}
.thumb-btn:hover{color:var(--lime)}
.thumb-btn.up.active{background:var(--lime-soft); border-color:rgba(190,242,100,0.4); color:#D9F99D}
.thumb-btn.down.active{background:var(--rose-soft); border-color:rgba(244,63,94,0.35); color:#FECDD3}
.icon-btn:active, .thumb-btn:active{transform:translateY(1px)}

/* Composer */
.composer{
  position:fixed; left:0; right:0; bottom:0; z-index:30;
  border-top:1px solid var(--border);
  background:var(--bg);
}
.composer-inner{padding:12px 0}
.textarea-wrap{
  border:1px solid var(--border); background:var(--surface);
  border-radius:14px; transition:box-shadow .15s ease, border-color .15s ease;
}
.textarea{
  width:100%; background:transparent; color:var(--text);
  padding:12px 14px; border:0; outline:0; resize:none; min-height:72px;
}
.send-btn{
  height:44px; padding:0 16px; border-radius:12px;
  border:1px solid var(--border); background:#010B17;
  color:var(--text); display:inline-flex; align-items:center; gap:8px;
  cursor:pointer; transition:color .15s ease, transform .08s ease;
}
.send-btn:hover{color:var(--lime)}
.send-btn:active{transform:translateY(1px)}
.helper{margin-top:6px;font-size:11px;color:#64748B}

/* Inline SVGs */
svg{display:block}
.icon-16{width:16px;height:16px}
.icon-20{width:20px;height:20px}
.icon-24{width:24px;height:24px}

/* Links reset */
a{color:inherit;text-decoration:none}

/* клики по плашке и иконкам */
.prob { cursor: pointer; user-select: none; }
.icon-btn, .thumb-btn { cursor: pointer; }

/* плавная прокрутка чата */
.thread { scroll-behavior: smooth; }
